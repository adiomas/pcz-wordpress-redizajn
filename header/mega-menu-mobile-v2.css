/**
 * pcz Mobile Menu - V2 REDESIGN
 * 
 * Kompaktniji, strukturiraniji i moderniji mobilni menu.
 * Ovaj file se uključuje NAKON mega-menu.css i override-a mobile stilove.
 * 
 * DIZAJN PRINCIPI:
 * 1. Accordion-style podsekcije - jasna hijerarhija
 * 2. Konzistentno indentiranje - vizualna dubina
 * 3. Touch-friendly (48px min) - Apple HIG compliant
 * 4. Kompaktno - manje paddinga, više sadržaja
 * 5. Čisti hover/active state - jasan feedback
 * 
 * @package pcz_Redizajn
 * @since 3.1.0
 */

/* ==========================================================================
   MOBILE MENU V2 - Potpuni Redizajn (768px i manje)
   ========================================================================== */

@media screen and (max-width: 768px) {
    
    /* ==========================================================================
       CSS VARIJABLE - Mobile Specifične
       ========================================================================== */
    
    :root {
        /* Boje */
        --mobile-bg: #1e1e24;
        --mobile-bg-darker: #16161a;
        --mobile-bg-lighter: rgba(255, 255, 255, 0.04);
        --mobile-border: rgba(255, 255, 255, 0.08);
        --mobile-text: rgba(255, 255, 255, 0.92);
        --mobile-text-muted: rgba(255, 255, 255, 0.55);
        --mobile-text-dim: rgba(255, 255, 255, 0.35);
        --mobile-accent: var(--pcz-primary, #C71585);
        
        /* Spacing */
        --mobile-padding-x: 16px;
        --mobile-item-height: 48px;
        --mobile-indent: 16px;
    }
    
    /* ==========================================================================
       NAVIGACIJA LIST - Overlay Menu
       ========================================================================== */
    
    .pcz-header .pcz-nav .pcz-nav__list,
    .pcz-nav__list,
    ul.pcz-nav__list {
        display: none !important;
        position: fixed !important;
        top: var(--pcz-header-height, 64px) !important;
        left: 0 !important;
        right: 0 !important;
        bottom: 0 !important;
        flex-direction: column !important;
        background: var(--mobile-bg) !important;
        padding: 0 !important;
        margin: 0 !important;
        overflow-y: auto !important;
        overflow-x: hidden !important;
        z-index: 9998 !important;
        -webkit-overflow-scrolling: touch;
        visibility: hidden !important;
        opacity: 0 !important;
        pointer-events: none !important;
        transition: opacity 0.2s ease, visibility 0.2s ease !important;
        
        /* Čist scroll */
        overscroll-behavior: contain;
    }
    
    /* OTVOREN MENU */
    .pcz-header .pcz-nav .pcz-nav__list.is-active,
    .pcz-nav__list.is-active,
    ul.pcz-nav__list.is-active {
        display: flex !important;
        visibility: visible !important;
        opacity: 1 !important;
        pointer-events: auto !important;
    }
    
    /* ==========================================================================
       NAV ITEMS - Glavni Menu Elementi
       ========================================================================== */
    
    .pcz-nav__item {
        width: 100%;
        margin: 0 !important;
        padding: 0 !important;
        border-bottom: 1px solid var(--mobile-border);
    }
    
    .pcz-nav__item:first-child {
        border-top: 1px solid var(--mobile-border);
    }
    
    /* ==========================================================================
       NAV LINKS - Touch-Friendly (48px min)
       ========================================================================== */
    
    .pcz-nav__link,
    .pcz-nav__item .pcz-nav__link {
        display: flex !important;
        align-items: center !important;
        justify-content: space-between !important;
        min-height: var(--mobile-item-height) !important;
        padding: 0 var(--mobile-padding-x) !important;
        margin: 0 !important;
        width: 100% !important;
        box-sizing: border-box !important;
        
        /* Tipografija */
        font-size: 15px !important;
        font-weight: 500 !important;
        color: var(--mobile-text) !important;
        text-decoration: none !important;
        letter-spacing: 0.01em !important;
        
        /* Efekti */
        background: transparent !important;
        border-radius: 0 !important;
        transition: background 0.15s ease !important;
        -webkit-tap-highlight-color: transparent;
    }
    
    /* Hover/Active - Subtle feedback */
    .pcz-nav__link:hover,
    .pcz-nav__link:active {
        background: var(--mobile-bg-lighter) !important;
    }
    
    /* Active Page Indicator */
    .pcz-nav__item.is-active .pcz-nav__link {
        color: white !important;
        background: var(--mobile-bg-lighter) !important;
        box-shadow: inset 3px 0 0 var(--mobile-accent) !important;
        font-weight: 600 !important;
    }
    
    /* Resetiraj desktop underline */
    .pcz-nav__item.is-active .pcz-nav__link::before {
        display: none !important;
    }
    
    /* ==========================================================================
       DROPDOWN TOGGLE - Arrow Indicator
       ========================================================================== */
    
    .pcz-nav__item.has-dropdown .pcz-nav__link {
        padding-right: calc(var(--mobile-padding-x) + 24px) !important;
        position: relative !important;
    }
    
    .pcz-nav__item.has-dropdown .pcz-nav__link::after {
        content: '' !important;
        position: absolute !important;
        right: var(--mobile-padding-x) !important;
        top: 50% !important;
        width: 8px !important;
        height: 8px !important;
        border: none !important;
        border-right: 2px solid var(--mobile-text-muted) !important;
        border-bottom: 2px solid var(--mobile-text-muted) !important;
        transform: translateY(-50%) rotate(45deg) !important;
        transition: transform 0.2s ease, border-color 0.2s ease !important;
        margin: 0 !important;
    }
    
    /* Otvoren dropdown - arrow rotira */
    .pcz-nav__item.has-dropdown.is-open .pcz-nav__link {
        background: var(--mobile-bg-lighter) !important;
        box-shadow: inset 3px 0 0 var(--mobile-accent) !important;
    }
    
    .pcz-nav__item.has-dropdown.is-open .pcz-nav__link::after {
        transform: translateY(-25%) rotate(-135deg) !important;
        border-color: var(--mobile-accent) !important;
    }
    
    /* ==========================================================================
       MEGA DROPDOWN CONTAINER
       ========================================================================== */
    
    .pcz-mega-dropdown {
        position: static !important;
        transform: none !important;
        min-width: 100% !important;
        width: 100% !important;
        max-width: 100% !important;
        box-shadow: none !important;
        border-radius: 0 !important;
        border: none !important;
        background: var(--mobile-bg-darker) !important;
        display: none !important;
        opacity: 0 !important;
        visibility: hidden !important;
        margin: 0 !important;
        padding: 0 !important;
        max-height: 0 !important;
        overflow: hidden !important;
        transition: max-height 0.25s ease, opacity 0.2s ease !important;
    }
    
    /* OTVOREN DROPDOWN */
    .pcz-nav__item.has-dropdown.is-open .pcz-mega-dropdown,
    .pcz-nav__item.is-open .pcz-mega-dropdown {
        display: block !important;
        opacity: 1 !important;
        visibility: visible !important;
        max-height: 2000px !important;
    }
    
    /* Container - Vertikalni Stack */
    .pcz-mega-dropdown__container {
        display: flex !important;
        flex-direction: column !important;
        gap: 0 !important;
        padding: 0 !important;
        margin: 0 !important;
    }
    
    /* ==========================================================================
       COLUMN - Glavna Kategorija (PONUDA ZA ODRASLE, PONUDA ZA DJECU)
       ========================================================================== */
    
    .pcz-mega-dropdown__column {
        min-width: 100% !important;
        width: 100% !important;
        padding: 0 !important;
        margin: 0 !important;
        animation: none !important;
        opacity: 1 !important;
    }
    
    /* Separator između kolona */
    .pcz-mega-dropdown__column:not(:first-child) {
        border-top: 1px solid var(--mobile-border);
    }
    
    /* Ukloni desktop separator */
    .pcz-mega-dropdown__column:not(:last-child)::after {
        display: none !important;
    }
    
    /* ==========================================================================
       COLUMN TITLE - Naslov Kategorije
       ========================================================================== */
    
    .pcz-mega-dropdown__title {
        display: flex !important;
        align-items: center !important;
        gap: 10px !important;
        min-height: 40px !important;
        padding: 12px var(--mobile-padding-x) 10px !important;
        margin: 0 !important;
        
        /* Stil */
        background: rgba(199, 21, 133, 0.08) !important;
        border-bottom: none !important;
        border-left: 3px solid var(--mobile-accent) !important;
        border-radius: 0 !important;
        
        /* Tipografija */
        font-size: 11px !important;
        font-weight: 700 !important;
        text-transform: uppercase !important;
        letter-spacing: 0.8px !important;
        color: var(--mobile-accent) !important;
    }
    
    /* Ukloni desktop dot */
    .pcz-mega-dropdown__title::before {
        display: none !important;
    }
    
    /* ==========================================================================
       LISTA PODSEKCIJA
       ========================================================================== */
    
    .pcz-mega-dropdown__list {
        list-style: none !important;
        margin: 0 !important;
        padding: 8px 0 !important;
        display: flex !important;
        flex-direction: column !important;
        gap: 0 !important;
    }
    
    .pcz-mega-dropdown__item {
        margin: 0 !important;
        padding: 0 !important;
    }
    
    /* ==========================================================================
       SECTION TITLE - Naslov Podsekcije (PLESNI TEČAJEVI, itd.)
       S ugniježđenim stavkama - accordion header stil
       ========================================================================== */
    
    .pcz-mega-dropdown__section-title {
        display: flex !important;
        align-items: center !important;
        gap: 8px !important;
        min-height: 36px !important;
        padding: 8px var(--mobile-padding-x) 8px calc(var(--mobile-padding-x) + var(--mobile-indent)) !important;
        margin: 0 !important;
        
        /* Tipografija */
        font-size: 11px !important;
        font-weight: 600 !important;
        text-transform: uppercase !important;
        letter-spacing: 0.4px !important;
        color: var(--mobile-text-muted) !important;
        
        /* Stil */
        background: transparent !important;
    }
    
    /* Accent bar ispred section title */
    .pcz-mega-dropdown__section-title::before {
        content: '' !important;
        width: 2px !important;
        height: 12px !important;
        background: var(--mobile-accent) !important;
        opacity: 0.4 !important;
        border-radius: 1px !important;
        flex-shrink: 0 !important;
    }
    
    /* ==========================================================================
       SECTION LINK - Klikabilna Podsekcija (bez ugniježđenih stavki)
       Npr. "Brzi tečajevi", "Full Dance Workout"
       ========================================================================== */
    
    .pcz-mega-dropdown__section-link {
        display: flex !important;
        align-items: center !important;
        gap: 10px !important;
        min-height: var(--mobile-item-height) !important;
        padding: 0 var(--mobile-padding-x) 0 calc(var(--mobile-padding-x) + var(--mobile-indent)) !important;
        margin: 0 !important;
        
        /* Tipografija */
        font-size: 14px !important;
        font-weight: 500 !important;
        text-transform: none !important;
        letter-spacing: 0 !important;
        color: var(--mobile-text) !important;
        text-decoration: none !important;
        
        /* Stil */
        background: transparent !important;
        border-radius: 0 !important;
        transition: background 0.15s ease, color 0.15s ease !important;
        -webkit-tap-highlight-color: transparent;
    }
    
    /* Bullet za section link */
    .pcz-mega-dropdown__section-link::before {
        content: '' !important;
        width: 6px !important;
        height: 6px !important;
        background: var(--mobile-text-dim) !important;
        border-radius: 50% !important;
        flex-shrink: 0 !important;
        transition: background 0.15s ease, transform 0.15s ease !important;
    }
    
    /* Hover/Active */
    .pcz-mega-dropdown__section-link:hover,
    .pcz-mega-dropdown__section-link:active {
        background: var(--mobile-bg-lighter) !important;
        color: white !important;
    }
    
    .pcz-mega-dropdown__section-link:hover::before,
    .pcz-mega-dropdown__section-link:active::before {
        background: var(--mobile-accent) !important;
        transform: scale(1.2) !important;
    }
    
    /* Ukloni desktop arrow */
    .pcz-mega-dropdown__section-link::after {
        display: none !important;
    }
    
    /* ==========================================================================
       SUBLIST - Lista Ugniježđenih Stavki
       ========================================================================== */
    
    .pcz-mega-dropdown__sublist {
        list-style: none !important;
        margin: 0 !important;
        padding: 0 0 4px 0 !important;
    }
    
    .pcz-mega-dropdown__subitem {
        margin: 0 !important;
        padding: 0 !important;
    }
    
    /* ==========================================================================
       SUBLINK - Ugniježđena Stavka
       Npr. "Tečaj Društvenih plesova"
       ========================================================================== */
    
    .pcz-mega-dropdown__link {
        display: flex !important;
        align-items: center !important;
        gap: 10px !important;
        min-height: 44px !important;
        padding: 0 var(--mobile-padding-x) 0 calc(var(--mobile-padding-x) + var(--mobile-indent) * 2) !important;
        margin: 0 !important;
        
        /* Tipografija */
        font-size: 14px !important;
        font-weight: 400 !important;
        color: var(--mobile-text-muted) !important;
        text-decoration: none !important;
        
        /* Stil */
        background: transparent !important;
        border-radius: 0 !important;
        transition: background 0.15s ease, color 0.15s ease, padding-left 0.15s ease !important;
        -webkit-tap-highlight-color: transparent;
    }
    
    /* Bullet za sublink */
    .pcz-mega-dropdown__link::before {
        content: '' !important;
        width: 4px !important;
        height: 4px !important;
        background: var(--mobile-text-dim) !important;
        border-radius: 50% !important;
        flex-shrink: 0 !important;
        transition: background 0.15s ease, transform 0.15s ease !important;
    }
    
    /* Hover/Active */
    .pcz-mega-dropdown__link:hover,
    .pcz-mega-dropdown__link:active {
        background: var(--mobile-bg-lighter) !important;
        color: white !important;
        padding-left: calc(var(--mobile-padding-x) + var(--mobile-indent) * 2 + 4px) !important;
    }
    
    .pcz-mega-dropdown__link:hover::before,
    .pcz-mega-dropdown__link:active::before {
        background: var(--mobile-accent) !important;
        transform: scale(1.3) !important;
    }
    
    /* ==========================================================================
       BODY LOCK - Sprječava scroll iza menija
       ========================================================================== */
    
    body.pcz-menu-open {
        overflow: hidden !important;
        position: fixed !important;
        width: 100% !important;
    }
    
    /* ==========================================================================
       BRAND AWARE - Sportski Klub Varijanta
       ========================================================================== */
    
    [data-brand="sportski-klub"] {
        --mobile-accent: #FF6B00;
    }
    
    [data-brand="sportski-klub"] .pcz-mega-dropdown__title {
        background: rgba(255, 107, 0, 0.08) !important;
    }
    
}

/* ==========================================================================
   EXTRA SMALL SCREENS (480px i manje)
   ========================================================================== */

@media screen and (max-width: 480px) {
    :root {
        --mobile-padding-x: 14px;
        --mobile-indent: 14px;
    }
    
    .pcz-mega-dropdown__title {
        font-size: 10px !important;
        letter-spacing: 0.6px !important;
    }
    
    .pcz-mega-dropdown__section-title {
        font-size: 10px !important;
    }
    
    .pcz-mega-dropdown__section-link,
    .pcz-mega-dropdown__link {
        font-size: 13px !important;
    }
}

/* ==========================================================================
   ACCESSIBILITY - Focus States
   ========================================================================== */

@media screen and (max-width: 768px) {
    .pcz-nav__link:focus-visible,
    .pcz-mega-dropdown__section-link:focus-visible,
    .pcz-mega-dropdown__link:focus-visible {
        outline: none !important;
        box-shadow: inset 0 0 0 2px var(--mobile-accent) !important;
    }
}

/* ==========================================================================
   ANIMATION - Subtle Entry Animation
   ========================================================================== */

@media screen and (max-width: 768px) {
    @keyframes pcz-mobile-slide-in {
        from {
            opacity: 0;
            transform: translateY(-8px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    .pcz-nav__item.has-dropdown.is-open .pcz-mega-dropdown__column {
        animation: pcz-mobile-slide-in 0.2s ease forwards;
    }
    
    .pcz-mega-dropdown__column:nth-child(1) { animation-delay: 0.02s; }
    .pcz-mega-dropdown__column:nth-child(2) { animation-delay: 0.06s; }
    .pcz-mega-dropdown__column:nth-child(3) { animation-delay: 0.10s; }
}
